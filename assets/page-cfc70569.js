import{I as x,j as s,J as f,D as m,K as y,L as d,M as h}from"./highcharts-react.min-85a2b376.js";const _=async n=>(await x.get(n)).data.responseData;function c(){return s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:s.jsx(f,{color:"#651FFF",size:50})})}function M(){const{year:n,county:l,town:i}=m(),a=`https://www.ris.gov.tw/rs-opendata/api/v1/datastore/ODRP019/${n}?county=${l}&town=${i}`,{data:r,isLoading:u}=y({queryKey:[a],queryFn:()=>_(a)}),e=r==null?void 0:r.reduce((o,t)=>(o.togetherMale+=parseInt(t.household_ordinary_m)+parseInt(t.household_business_m),o.togetherFeMale+=parseInt(t.household_ordinary_f)+parseInt(t.household_business_f),o.singleMale+=parseInt(t.household_single_m),o.singleFeMale+=parseInt(t.household_single_f),o.totalTogether+=parseInt(t.household_ordinary_total)+parseInt(t.household_business_total),o.totalSingle+=parseInt(t.household_single_total),o),{togetherMale:0,togetherFeMale:0,singleMale:0,singleFeMale:0,totalTogether:0,totalSingle:0}),g={chart:{type:"column"},title:{text:"人口數"},xAxis:{categories:["共同生活","獨立生活"]},series:[{name:"男性",data:[e==null?void 0:e.togetherMale,e==null?void 0:e.singleMale],color:"#7d5fb2",dataLabels:{enabled:!0}},{name:"女性",data:[e==null?void 0:e.togetherFeMale,e==null?void 0:e.togetherFeMale],color:"#c29fff ",dataLabels:{enabled:!0}}],yAxis:{min:0,title:{text:"數量"}}},p={chart:{type:"pie"},title:{text:"戶數統計"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:" {point.percentage:.1f} %"},showInLegend:!0}},series:[{name:"數量",colorByPoint:!0,data:[{name:"共同生活",y:e==null?void 0:e.totalTogether,color:"#a3b1ff "},{name:"獨立生活",y:e==null?void 0:e.totalSingle,color:"#626eb2 "}]}]};return u?s.jsx(c,{}):r===void 0?s.jsxs("div",{children:[n,"年",l,i,"沒有資料"]}):s.jsxs("div",{className:"my-4 flex w-full flex-col gap-4 px-4",children:[s.jsxs("h1",{className:"mb-4 text-center text-3xl",children:[n,"年",l,i]}),s.jsx(d,{highcharts:h,options:g}),s.jsx(d,{highcharts:h,options:p})]})}export{M as default};
